# 고장 시나리오 상세

## 시나리오 코드 체계

### 구성 요소
1. **SCN (Scenario)**: 대분류
2. **LOC (Location)**: 위치/존
3. **DEV (Device)**: 장비
4. **FLT (Fault)**: 세부 원인
5. **RES (Resolution)**: 해결 방안

## 주요 시나리오 예시

### A1-ZF-LP40-LNK: Front Pandar40P 링크 단선
- **현상**: Front 존의 Pandar40P LiDAR 링크 단선
- **탐지**: 포트 down, FRER dup/rec 카운터 변화
- **요구도**: 손실 ≤1프레임, T_FA≤1프레임 주기
- **해결**: FRR+RER (FRER 기반 무중단 복구 + 경로 재설정)
- **판정**: 무손실 또는 ≤1프레임이면 Pass

### A2-ZB-SWB-QDR: Rear 스위치 큐드롭
- **현상**: Rear 스위치에서 큐 드롭 발생
- **탐지**: Q7 drop 증가, 대역폭 포화
- **요구도**: Q7 drop=0, 손실률≤1e-7
- **해결**: CBS+ (CBS 재프로파일링), PSFP (스트림 폴리싱)
- **판정**: 상위 클래스 지연·드롭 0

### B1-ZR-LG32-CON: Right G32 혼잡
- **현상**: Right 존 G32 LiDAR 트래픽 혼잡
- **탐지**: 큐 지연 증가, 대역폭 사용률 증가
- **요구도**: Q7 E2E≤10ms(P99.999)
- **해결**: CBS+ (우선순위 재조정)
- **판정**: 지연 상한 내

### C1-ZB-SWB-ASY: Rear 경로지연 비대칭
- **현상**: Rear 스위치 경로 지연 비대칭
- **탐지**: out-of-order 증가, late arrival
- **요구도**: FRER 윈도 ≥64, late=0
- **해결**: FRR (FRER 윈도 조정)
- **판정**: 중복제거 정상

### D1-ZL-CAMV-CRC: Left 카메라 CRC 오류
- **현상**: Left 카메라 CRC 오류 발생
- **탐지**: FCS error 증가
- **요구도**: 손상프레임 격리, 상위 영향 0
- **해결**: ISO (격리/바이패스)
- **판정**: 오류프레임 격리

### E2-ZB-ACN-LOS: Rear ACU_NO 동기상실
- **현상**: Rear ACU_NO PTP 동기 상실 장기화
- **탐지**: PTP state=FREERUN
- **요구도**: 완화프로파일로 KPI 유지
- **해결**: PTP (동기 복구), DGR (성능저하모드)
- **판정**: 지연·손실 기준 충족

### F1-ZF-SWF-HNG: Front TSN 스위치 Hang
- **현상**: Front TSN 스위치 응답 없음
- **탐지**: 하트비트 타임아웃, OAM 불응
- **요구도**: 서비스 연속성 보장
- **해결**: RER (경로절체) → RST (재시작)
- **판정**: 절체 중 손실≤1프레임

### F2-ZB-SWB-RBT: Rear TSN 스위치 재부팅 필요
- **현상**: Rear TSN 스위치 오류 누적으로 재부팅 필요
- **탐지**: 오류누적/메모리임계
- **요구도**: 재부팅 중 서비스 유지
- **해결**: RER, 재부팅 후 RBK
- **판정**: 무중단이면 Pass

### F3-ZF-ACI-HNG: ACU_IT 프로세스 Hang
- **현상**: ACU_IT 프로세스 응답 없음
- **탐지**: 앱 헬스체크 실패
- **요구도**: 제어기 이중화 시 무중단
- **해결**: RER (주/예비 전환), RST
- **판정**: 무중단 또는 T_FA≤1프레임

### G1-ZR-SWR-PWR: Right 스위치 전원 상실
- **현상**: Right 스위치 전원 차단
- **탐지**: 전압감시/전원다운
- **요구도**: 서비스 유지(이중 전원/경로)
- **해결**: RER + FRR
- **판정**: 연속성 확보

### G2-ZB-LP40-THM: Rear 라이다 과열
- **현상**: Rear Pandar40P 과열
- **탐지**: 온도센서 트립
- **요구도**: 데이터 품질 유지
- **해결**: DGR (프레임레이트 감소) + ALM
- **판정**: KPI 완화 범위 내

### H2-ZF-SWF-FW: Front 스위치 펌웨어 버그
- **현상**: Front 스위치 펌웨어 버그 발견
- **탐지**: 이슈 시그니처 탐지
- **요구도**: 안정버전 복귀
- **해결**: RBK (펌웨어 롤백)
- **판정**: 복귀 후 KPI 만족

## 속성 태그
- **TMP (Temporary)**: 일시적 장애
- **INT (Intermittent)**: 간헐적 장애
- **PERM (Permanent)**: 지속적 장애
- **P1, P2, MP**: 경로 지정 (단일/이중/다중)

## 탐지 및 운영 절차

### FDI (Fault Detection and Isolation)
1. 이벤트 수집
2. TMP/INT/PERM 분류
3. 경로 이중화 여부 확인
4. 적절한 해결방안 적용
5. KPI 재검증
6. EDR/DSSAD 로그 기록

### 장비 상태 관리
- **하트비트/워치독**: 100-200ms 주기, 3연속 실패 시 HNG 판정
- **관리평면 독립**: 데이터플레인과 별도 경로/대역
- **이중 전원/업링크**: 핵심 스위치·ECU 이중화
- **부트 시간**: Warm≤3s, Cold≤30s
- **구성 관리**: 골든 설정/펌웨어 저장

## 해결 불가 시나리오
단일경로 단선, 이중화 없음 등 해결 불가능한 경우:
- **SSC (Safe-Stop/Controlled Stop)**: 안전정지/감속정지
- **ALM**: 경보 및 로그 기록 필수